From 96414ee4f53df827036a9de72b148365aa8407f2 Mon Sep 17 00:00:00 2001
From: Volodymyr Zhdanov <wight554@gmail.com>
Date: Sat, 19 Sep 2020 04:15:12 +0300
Subject: [PATCH] interfaces: Introduce vendor.qti.hardware.btconfigstore@2.0
 HAL

* Based on observing libbtconfigstore expectations

Change-Id: I6f1366c0ca55cd6723875c5b67b5f0b26f3c0480
---
 btconfigstore/2.0/Android.bp         | 15 +++++++++++++++
 btconfigstore/2.0/IBTConfigStore.hal |  8 ++++++++
 btconfigstore/2.0/types.hal          | 23 +++++++++++++++++++++++
 3 files changed, 46 insertions(+)
 create mode 100644 btconfigstore/2.0/Android.bp
 create mode 100644 btconfigstore/2.0/IBTConfigStore.hal
 create mode 100644 btconfigstore/2.0/types.hal

diff --git a/btconfigstore/2.0/Android.bp b/btconfigstore/2.0/Android.bp
new file mode 100644
index 0000000..2dbca58
--- /dev/null
+++ b/btconfigstore/2.0/Android.bp
@@ -0,0 +1,15 @@
+// This file is autogenerated by hidl-gen -Landroidbp.
+
+hidl_interface {
+    name: "vendor.qti.hardware.btconfigstore@2.0",
+    root: "vendor.qti.hardware.btconfigstore",
+    system_ext_specific: true,
+    srcs: [
+        "types.hal",
+        "IBTConfigStore.hal",
+    ],
+    interfaces: [
+        "android.hidl.base@1.0",
+    ],
+    gen_java: true,
+}
diff --git a/btconfigstore/2.0/IBTConfigStore.hal b/btconfigstore/2.0/IBTConfigStore.hal
new file mode 100644
index 0000000..61c97ea
--- /dev/null
+++ b/btconfigstore/2.0/IBTConfigStore.hal
@@ -0,0 +1,8 @@
+package vendor.qti.hardware.btconfigstore@2.0;
+
+interface IBTConfigStore {
+    getVendorProperties(uint32_t prop) generates (Result result, vec<VendorProperty> vendorProperty);
+    setVendorProperty(VendorProperty vendorProperty) generates (Result result);
+    getControllerAddOnFeatures() generates (Result result, ControllerAddOnFeatures featuresList);
+    getHostAddOnFeatures() generates (Result result, HostAddOnFeatures featuresList);
+};
diff --git a/btconfigstore/2.0/types.hal b/btconfigstore/2.0/types.hal
new file mode 100644
index 0000000..23877f9
--- /dev/null
+++ b/btconfigstore/2.0/types.hal
@@ -0,0 +1,23 @@
+package vendor.qti.hardware.btconfigstore@2.0;
+
+enum Result : int32_t {
+    SUCCESS,
+    UNKNOWN_ERROR,
+};
+
+struct VendorProperty {
+    uint32_t type;
+    string value;
+};
+
+struct ControllerAddOnFeatures {
+    uint16_t product_id;
+    uint16_t rsp_version;
+    uint8_t feat_mask_len;
+    uint8_t[8] features;
+};
+
+struct HostAddOnFeatures {
+    uint8_t feat_mask_len;
+    uint8_t[8] features;
+};
-- 
2.28.0

